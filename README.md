# üì± Mobile Talon API

FastAPI‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∫–æ–ª—å–Ω—ã–º–∏ —Ç–∞–ª–æ–Ω–∞–º–∏ –Ω–∞ –ø–∏—Ç–∞–Ω–∏–µ.  
–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–æ–ª–∏ **—É—á–∏—Ç–µ–ª—å** –∏ **—Å—Ç–æ–ª–æ–≤–∞—è**, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, –ø–æ–¥–∞—á—É —Ç–∞–ª–æ–Ω–æ–≤ –∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîë **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** (JWT, —Ä–æ–ª–∏ `teacher` –∏ `canteen`)
- üè´ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** —Å—Ç–æ–ª–æ–≤—ã—Ö –∏ —É—á–∏—Ç–µ–ª–µ–π
- üë§ **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- üéü **–¢–∞–ª–æ–Ω—ã**:
  - –£—á–∏—Ç–µ–ª—å –ø–æ–¥–∞—ë—Ç —Ç–∞–ª–æ–Ω—ã (–ø–ª–∞—Ç–Ω—ã–µ –∏ –ª—å–≥–æ—Ç–Ω—ã–µ)
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞ –Ω–µ–¥–µ–ª—é
- üìä **–û—Ç—á—ë—Ç—ã –¥–ª—è —Å—Ç–æ–ª–æ–≤–æ–π**:
  - –°–≤–æ–¥–∫–∞ –∑–∞ –¥–µ–Ω—å (–ø–æ –∫–ª–∞—Å—Å–∞–º)
  - –°–≤–æ–¥–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é (–ø–æ –¥–Ω—è–º)

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- [FastAPI](https://fastapi.tiangolo.com/) ‚Äî –≤–µ–±‚Äë—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- [SQLAlchemy](https://www.sqlalchemy.org/) ‚Äî ORM
- [Pydantic v2](https://docs.pydantic.dev/) ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- [Passlib](https://passlib.readthedocs.io/) ‚Äî —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- [python-jose](https://python-jose.readthedocs.io/) ‚Äî JWT
- SQLite (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å)

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ database.py          # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –∏ —Å–µ—Å—Å–∏–∏
‚îú‚îÄ‚îÄ models.py            # ORM-–º–æ–¥–µ–ª–∏ (User, Ticket)
‚îú‚îÄ‚îÄ schemas.py           # Pydantic-—Å—Ö–µ–º—ã (–∑–∞–ø—Ä–æ—Å—ã/–æ—Ç–≤–µ—Ç—ã)
‚îú‚îÄ‚îÄ routers/             # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ   ‚îú‚îÄ‚îÄ auth_router.py
‚îÇ   ‚îú‚îÄ‚îÄ profile_router.py
‚îÇ   ‚îú‚îÄ‚îÄ teacher_router.py
‚îÇ   ‚îú‚îÄ‚îÄ canteen_router.py
‚îÇ   ‚îî‚îÄ‚îÄ login_router.py
‚îú‚îÄ‚îÄ environ_init.py      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (SECRET_KEY, DB URL –∏ —Ç.–¥.)
‚îú‚îÄ‚îÄ database.db          # SQLite –±–∞–∑–∞ (–ª–æ–∫–∞–ª—å–Ω–æ)
‚îî‚îÄ‚îÄ .env                 # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone https://github.com/yourname/mobile-talon-api.git
   cd mobile-talon-api
   ```

2. **–°–æ–∑–¥–∞—ë–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –µ–≥–æ:**
   ```bash
   python -m venv .venv
   source .venv/bin/activate   # Linux/Mac
   .venv\Scripts\activate      # Windows
   ```

3. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   pip install -r requirements.txt
   ```

4. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º .env**

5. **–ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   uvicorn main:app --reload
   ```

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

---

## üîê –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```http
POST /auth/login
Content-Type: application/json

{
  "login": "teacher1",
  "password": "1234"
}
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "access_token": "jwt_token_here",
  "token_type": "bearer",
  "role": "teacher"
}
```

### 2. –ü–æ–¥–∞—á–∞ —Ç–∞–ª–æ–Ω–∞ (—É—á–∏—Ç–µ–ª—å)

```http
POST /talon/submit
Authorization: Bearer <token>
Content-Type: application/json

{
  "date": "2025-09-25",
  "paid_count": 20,
  "free_count": 5
}

```

### –ò —Ç–∞–∫ –¥–∞–ª–µ–µ(–≤ –ø–∞–ø–∫–µ examples_req)

```